.SUBCKT MSA12080A Drain Gate Source

##### Drain Parasitics
L1 Drain d1  {Ld}
R1 d1 d2 {RDt}

##### Gate Parasitics
L2 Gate g1  {Lg}
R2 g1 g2  1.5
#Varb Gate g2 0

##### Source Parasitics
L3 s1 Source  {Ls}

##### Device Capacitances
C1 g2 s1  {kgs*1.05843e-09}
C2 d2 g2 Q=kgd*TABLE(V(d2,s1),0,0,3.98947319755006,2.42940473481262e-09,7.95794819698513,2.84059384977826e-09,15.874010519682,3.32224265517659e-09,31.6644697529495,3.98450264096319e-09,63.1622766970132,4.96341240347836e-09,125.992104989487,6.45558683518799e-09,251.321062979236,8.78234873520228e-09,501.319322367726,1.23732926634371e-08,1000,1.848107774984e-08)
C3 d2 s1 Q=kds*TABLE(V(d2,s1),0,0,3.98947319755006,3.4912902096951e-09,7.95794819698513,5.97041538301412e-09,15.874010519682,9.82443774810993e-09,31.6644697529495,1.55954858067532e-08,63.1622766970132,2.40431379848272e-08,125.992104989487,3.62197250156178e-08,251.321062979236,5.36994261834447e-08,501.319322367726,7.84545343021693e-08,1000,1.1322052948713e-07)

##### Body Diode
D1 s1 d2 Dbody


############## Current Generator ##############

##### Modified Angelov with functional definitions
#B1 d2 s1 I = ((  a1/(1+exp(b1+c1*V(g2,s1)))  )+(  a2/(1+exp(b2+c2*V(g2,s1)))  )*V(d2,s1)*tanh(sinh((  a3/(1+exp(b3+c3*V(g2,s1)))+d3  )*V(d2,s1))))*atan((  a4-b4*(tanh(c4*V(g2,s1)+d4))  )*V(d2,s1))
# b = a1/(1+exp(b1+c1*V(g2,s1)))
# m = a2/(1+exp(b2+c2*V(g2,s1)))
# C1 = a3/(1+exp(b3+c3*V(g2,s1)))+d3
# C2 = a4-b4*(tanh(c4*V(g2,s1)+d4))
###################################

##### Modified Angelov with LUTs
#B1 d2 s1 I = ((  b  )+(  m  )*V(d2,s1)*tanh(sinh((  c1  )*V(d2,s1))))*atan((  c2  )*V(d2,s1))
# b = TABLE(V(g2,s1),0,0,4,0.27448,5.6,1.2294,7.2,3.538,8.8,7.675,10.4,14.0945,12,18.5573,13.6,25.2848,15.2,33.4707,16.8,39.049,18.4,37.015,20,44.0109)
# m = TABLE(V(g2,s1),0,0,4,0.0026763,5.6,0.0036815,7.2,0.22212,8.8,0.40693,10.4,0.18237,12,0.44283,13.6,0.73945,15.2,0.86333,16.8,0.97788,18.4,1.4902,20,1.3188)
# C1 = TABLE(V(g2,s1),0,0,4,0.02723,5.6,0.43085,7.2,0.0017514,8.8,0.0042885,10.4,0.034235,12,0.29454,13.6,0.34224,15.2,0.57986,16.8,0.50249,18.4,0.46486,20,58.4357)
# C2 = TABLE(V(g2,s1),0,0,4,2.0746,5.6,1.173,7.2,0.72931,8.8,0.51149,10.4,0.37255,12,0.36048,13.6,0.29952,15.2,0.24425,16.8,0.22428,18.4,0.24677,20,0.21338)
B1 d2 s1 I = ((  TABLE(V(g2,s1),4,0.27448,5.6,1.2294,7.2,3.538,8.8,7.675,10.4,14.0945,12,18.5573,13.6,25.2848,15.2,33.4707,16.8,39.049,18.4,37.015,20,44.0109)  )+(  TABLE(V(g2,s1),4,0.0026763,5.6,0.0036815,7.2,0.22212,8.8,0.40693,10.4,0.18237,12,0.44283,13.6,0.73945,15.2,0.86333,16.8,0.97788,18.4,1.4902,20,1.3188)  )*V(d2,s1)*tanh(sinh((  TABLE(V(g2,s1),4,0.02723,5.6,0.43085,7.2,0.0017514,8.8,0.0042885,10.4,0.034235,12,0.29454,13.6,0.34224,15.2,0.57986,16.8,0.50249,18.4,0.46486,20,58.4357)  )*V(d2,s1))))*atan((  TABLE(V(g2,s1),4,2.0746,5.6,1.173,7.2,0.72931,8.8,0.51149,10.4,0.37255,12,0.36048,13.6,0.29952,15.2,0.24425,16.8,0.22428,18.4,0.24677,20,0.21338)  )*V(d2,s1))
###################################

## Necessary current paths for AC numerical stability
R3 g2 s1 100e3
#R3 g2 s1 1e6
D2 g2 d2 Dgd
#D3 s1 g2 Csg
#D3 s1 g2 Cgs

#### C1 = a1*tanh(b1+c1*V(g2,s1))
## C1 = c1
## C2 = a2/(1+exp(b2*V(g2,s1)))+c2
## b  = alpha1/(1+exp(beta1+gamma1*V(g2,s1)))
## m  = alpha2/(1+exp(beta2+gamma2*V(g2,s1)))

.param RDt=R0*(1+TC1*(T-25))
.param R0=0.00495176 
.param TC1=0.0926687


*****************************************
*****  Effective Capacitance Gains  *****
*****************************************
.param kgd = 1
.param kds = 1
.param kgs = 1
*****************************************

*****************************************
*****     Parasitic Inductances     *****
*****************************************
.param Ld = 1.5e-10
.param Lg = 4.895e-9
.param Ls = 2.6e-09
*****************************************


*****************************************
**  Drain Current Generator Parameters **
*****************************************
#.param a1 = 38.1495;
#.param b1 = 5.9463;
#.param c1 = -0.5035;

#.param a2 = 1.9155;
#.param b2 = 6.7913;
#.param c2 = -0.4427;

#.param a3 = -0.4659;
#.param b3 = -27.0168;
#.param c3 = 1.9067;
#.param d3 = 0.5069;

#.param a4 = 0.6010;
#.param b4 = 0.3511;
#.param c4 = 0.3743;
#.param d4 = -3.5393;
*****************************************


.model Dbody D(Ron=0.02 Roff=5e6 Vfwd=3 Vrev=1e6)
#.model Dgd D(Ron=0.02 Roff=5e6 Vfwd=3 Vrev=1e6)
.model Dgd D(Ron=0.02 Roff=5e6 Vfwd=20 Vrev=1e6)
#.model Csg D(Ron=0.02 Roff=5e6 Vfwd=10 Vrev=1e6)
.ENDS MSA12080A
